ФАЙЛОВАЯ СИСТЕМА LINUX

/.  КОРЕНЬ      
|     Это главный каталог в системе Linux. Только пользователь root имеет право читать и изменять файлы в этом каталоге.
|     У пользователя root домашний каталог /root, но не сам /.
|
|--/bin   (BINARIES) БИНАРНЫЕ ФАЙЛЫ ПОЛЬЗОВАТЕЛЯ
|           Здесь расположены программы, которые можно использовать в однопользовательском режиме или режиме восстановления. 
|           Утилиты, которые могут использоваться пока еще не подключен каталог /usr/. Это такие общие команды, как cat, ls, tail, ps и т д.
|
|--/sbin  (SYSTEM BINARIES) СИСТЕМНЫЕ ИСПОЛНЯЕМЫЕ ФАЙЛЫ
|           Двоичные исполняемые файлы, которые доступны на ранних этапах загрузки, когда не примонтирован каталог /usr. 
|           Но здесь находятся программы, которые можно выполнять только с правами суперпользователя. Это разные утилиты для обслуживания системы. 
|           Например, iptables, reboot, fdisk, ifconfig,swapon и т д.
|
|--/etc   (ETCETERA) КОНФИГУРАЦИОННЫЕ ФАЙЛЫ
|           Конфигурационные файлы всех программ, установленных в системе. Кроме конфигурационных файлов, в системе инициализации
|           Init Scripts, здесь находятся скрипты запуска и завершения системных демонов, монтирования файловых систем и автозагрузки программ. 
|
|--/dev   (DEVICES) ФАЙЛЫ УСТРОЙСТВ
|           Этот каталог содержит не совсем обычную файловую систему. Структура файловой системы Linux и содержащиеся в папке /dev файлы 
|           инициализируются при загрузке системы, сервисом udev. Выполняется сканирование всех подключенных устройств и создание для них специальных файлов. 
|           Это такие устройства, как: /dev/sda, /dev/sr0, /dev/tty1, /dev/usbmon0 и т д.
|
|
|--/proc  (PROCCESS) ИНФОРМАЦИЯ О ПРОЦЕССАХ
|           Подсистема, динамически создаваемая ядром. Здесь содержится вся информация о запущенных процессах в реальном времени. 
|           По сути, это псевдофайловая система, содержащая подробную информацию о каждом процессе, его Pid, имя исполняемого файла, 
|           параметры запуска, доступ к оперативной памяти и так далее. Также здесь можно найти информацию об использовании системных ресурсов, например,
|           /proc/cpuinfo, /proc/meminfo или /proc/uptime.
|
|--/var   (VARIABLE) - ПЕРЕМЕННЫЕ ФАЙЛЫ
|  |         Файлы, которые часто изменяются. Размер этих файлов постоянно увеличивается. 
|  |         Здесь содержатся файлы системных журналов, различные кеши, базы данных и так далее.
|  |
|  +--/log     ФАЙЛЫ ЛОГОВ
|  |             Здесь содержатся большинство файлов логов всех программ, установленных в операционной системе. У многих программ есть свои подкаталоги 
|  |             в этой папке, например, /var/log/apache - логи веб-сервера, /var/log/squid - файлы журналов кеширующего сервера squid.
|  |
|  +--/lib     БАЗЫ ДАННЫХ
|  |             Файлы баз данных, пакеты, сохраненные пакетным менеджером и т д.
|  |
|  +--/mail    ПОЧТА
|  |             В эту папку почтовый сервер складывает все полученные или отправленные электронные письма, здесь же могут находиться его логи и файлы конфигурации.
|  |
|  +--/spool   ОЧЕРЕДИ
|  |             Изначально, эта папка отвечала за очереди печати на принтере и работу набора программ cups.
|  |
|  +--/lock    ФАЙЛЫ БЛОКИРОВОК
|  |             Здесь находятся файлы блокировок. Эти файлы означают, что определенный ресурс, файл или устройство занят и не может быть использован другим процессом. 
|  |             Apt-get, например, блокирует свою базу данных, чтобы другие программы не могли ее использовать, пока программа с ней работает.
|  |
|  +--/run     PID ПРОЦЕССОВ
|                Содержит файлы с PID процессов, которые могут быть использованы, для взаимодействия между программами. В отличие от каталога /run данные сохраняются 
|                после перезагрузки.
|
+--/tmp   (TEMP) ВРЕМЕННЫЕ ФАЙЛЫ
|           В этом каталоге содержатся временные файлы, созданные системой, любыми программами или пользователями. 
|           Все пользователи имеют право записи в эту директорию. Файлы удаляются при каждой перезагрузке.
|
+--/usr   (USER APPLICATIONS) ПРОГРАММЫ ПОЛЬЗОВАТЕЛЯ
|  |         Тут наиболее большая структура каталогов Linux. Здесь находятся исполняемые файлы, исходники программ, 
|  |         различные ресурсы приложений, картинки, музыку и документацию.
|  |
|  +--/bin    ИСПОЛНЯЕМЫЕ ФАЙЛЫ
|  |            Содержит исполняемые файлы различных программ, которые не нужны на первых этапах загрузки системы, 
|  |            например, музыкальные плееры, графические редакторы, браузеры и так далее.
|  |
|  +--/sbin   СИСТЕМНЫЕ ИСПОЛНЯЕМЫЕ ФАЙЛЫ
|  |            Содержит двоичные файлы программ для системного администрирования, которые нужно выполнять с правами суперпользователя. 
|  |            Например, таких как Gparted, sshd, useradd, userdel и т д.
|  |
|  +--/lib    БИБЛИОТЕКИ
|  |            Библиотеки для программ из /usr/bin или /usr/sbin.
|  |
|  +--/local  ФАЙЛЫ ПОЛЬЗОВАТЕЛЯ
|               Файлы программ, библиотек, и настроек созданные пользователем. Например, здесь могут храниться программы 
|               собранные и установленные из исходников и скрипты, написанные вручную.
|
+--/home   ДОМАШНЯЯ ПАПКА
|            В этой папке хранятся домашние каталоги всех пользователей. В них они могут хранить свои личные файлы, настройки программ и т. д.
|
+--/boot   ФАЙЛЫ ЗАГРУЗЧИКА
|            Содержит все файлы, связанные с загрузчиком системы. Это ядро vmlinuz, образ initrd, а также файлы загрузчика, находящие в каталоге /boot/grub.
|
+--/lib    (LIBRARY) СИСТЕМНЫЕ БИБЛИОТЕКИ
|            Файлы системных библиотек, которые используются исполняемыми файлами в каталогах /bin и /sbin.
|            Библиотеки имеют имена файлов с расширением *.so и начинаются с префикса lib*. Например, libncurses.so.5.7.
|            Папка /lib64 в 64 битных системах содержит 64 битные версии библиотек из /lib.
|
+--/opt    (OPTIONAL APPLICATIONS)  ДОПОЛНИТЕЛЬНЫЕ ПРОГРАММЫ
|            В эту папку устанавливаются проприетарные программы, игры или драйвера. Это программы созданные в виде отдельных исполняемых 
|            файлов самими производителями. Такие программы устанавливаются в под-каталоги /opt/, все исполняемые файлы, библиотеки и файлы 
|            конфигурации находятся в одной папке.
|
+--/mnt    (MOUNT)  МОНТИРОВАНИЕ
|            Монтирование внешничх или дополнительных файловых систем.
|
+--/media  СЪЕМНЫЕ НОСИТЕЛИ
|            В этот каталог система монтирует все подключаемые внешние накопители - USB флешки, оптические диски и другие носители информации.
|
+--/srv    (SERVER)  СЕРВЕР
|            В этом каталоге содержатся файлы серверов и сервисов. Например, могут содержаться файлы веб-сервера apache.
|
+--/run    ПРОЦЕССЫ
|            Еще один каталог, содержащий PID файлы процессов, похожий на /var/run, но в отличие от него, он размещен в TMPFS,
|            а поэтому после перезагрузки все файлы теряются.
|
+--/sys    (SYSTEM)  ИНФОРМАЦИЯ О СИСТЕМЕ
             Получение информации о системе непосредственно от ядра. Это еще одна файловая система организуемая ядром и позволяющая 
             просматривать и изменить многие параметры работы системы, например, работу swap, контролировать вентиляторы и многое другое.



uname [опции]  --информация о системе
      -a       --подробная информация о системе
      -r       --версия ядра
      
      
df [опции]   --свободное место на диске
   -h        --в читабельном виде
   
   
du <директория>  --свободное место в директории


useradd <имя_пользователя> [опции]    --добавить нового пользователся.
                           -d         --базовый каталог для размещения домашнего каталога пользователя, по умолчанию /home.
                           -c         --комментарий к учетной записи.
                           -d         --домашний каталог, в котором будут размещаться файлы пользователя.
                           -e         --дата, когда учетная запись пользователя будет заблокирована, в формате ГГГГ-ММ-ДД.
                           -f         --заблокировать учетную запись сразу после создания.
                           -g         --основная группа пользователя.
                           -G         --список дополнительных групп.
                           -k         --каталог с шаблонами конфигурационных файлов.
                           -l         --не сохранять информацию о входах пользователя в lastlog и faillog.
                           -m         --создавать домашний каталог пользователя, если он не существует.
                           -M         --не создавать домашнюю папку.
                           -N         --не создавать группу с именем пользователя.
                           -o         --разрешить создание пользователя linux с неуникальным идентификатором UID.
                           -p         --задать пароль пользователя.
                           -r         --создать системного пользователя, не имеет оболочки входа, без домашней директории и 
                                        с идентификатором до SYS_UID_MAX.
                           -s         --командная оболочка для пользователя.
                           -u         --идентификатор для пользователя.
                           -D         --отобразить параметры, которые используются по умолчанию для создания пользователя. 
                                        Если вместе с этой опцией задать еще какой-либо параметр, то его значение по умолчанию будет переопределено.

                           
userdel <имя_пользователя> [опции]    --удалить пользователя


usermod <опции> <имя_группы> <имя_пользователя>   --добавить пользователя в группу
        -G                                        --дополнительные группы
        -a                                        --Добавить пользователя в дополнительную 
                                                    группу(ы). Использовать только вместе с 
                                                    параметром -G
        -g                                        --изменить имя первичной группы

id [опции] [имя_пользователя]  --uid, gid, groups(список групп) пользователя
   -G                          --идентификаторы всех групп, к которым принадлежит пользователь
   -n                          --имена вместо чисел
  
  
gpasswd -d <имя_пользователся> <имя_группы>   --удалить пользователя из группы

   
/etc/passwd                           --описание существующих пользователей

nick:x:1001:1001:mark,,,:/home/mark:/bin/bash
____ _ ____ ____ _______ __________ _________
|    |   |    |     |         |        |
|    |   |    |     |         |        +->  путь к оболочке входа пользователя.
|    |   |    |     |         +---------->  Домашняя директория
|    |   |    |     +-------------------->  GECOS (имя_пользователя или приложения, номер_комнаты,рабочий_телефона,Домашний телефон,другая_информация)
|    |   |    +-------------------------->  GID Идентификатор группы /etc/groups
|    |   +------------------------------->  UID Идентификатор пользователя
|    +----------------------------------->  Пароль /etc/shadow (хеш пароля)
+---------------------------------------->  Имя пользователя


Историческая справка:
  Поле GECOS
  Когда-то у пионеров Unix не было собственного принтера. Им приходилось передавать 
  свои задания на печать на мэйнфрейм General Electric, на котором работала 
  комплексная операционная система General Electric (GECOS). Для этого 
  пользователям Unix-систем требовалось хранить и использовать учётные данные аккаунта 
  в системе GECOS.

  Поле GECOS было создано для хранения этих учётных данных. Это очень нишевое 
  требование давно вошло в историю, и поле GECOS было переназначено для хранения 
  других данных, связанных с владельцем учётной записи пользователя. У него может 
  быть новая работа, но оно сохраняет своё старое название. Его до сих пор называют 
  полем GECOS.


finger <имя_пользователя>   --прочитать данные из поля GECOS


chfn [опции] <имя_пользователя>     --изменить данные поля GECOS
     -f "Имя Фамилия"               --изменить только поле имени в GECOS
     -r <номер>                     --комната или офис
     -w <рабочий_телефон>           --рабочий телефон
     -h <домашний_телефон>          --домашний
     
     
pwd   --полный путь текущей директории


ls [опции] [путь] --список фалов в директории     
   -l             --права на файлы  
   -a             --отобразить скрытые файлы и каталоги
   
   
l rwx rwx rwx  7  root  root  168 Nov 24 14:02  doc -> share/doc   --права на директорию или файл
_ ___ ___ ___  _  ____  ____  ___ ____________  ________________
|  |   |   |   |   |     |     |       |               |
|  |   |   |   |   |     |     |       |               +------->   имя файла/папки и ссылка (если это символическая ссылка)
|  |   |   |   |   |     |     |       +----------------------->   дата последнего изменения 
|  |   |   |   |   |     |     +------------------------------->   размер в байтах
|  |   |   |   |   |     +------------------------------------->   имя группы файла
|  |   |   |   |   +------------------------------------------->   имя владельца
|  |   |   |   +----------------------------------------------->   число ссылок на файл
|  |   |   +--------------------------------------------------->   все остальные (o - other)
|  |   +------------------------------------------------------->   группа (g - group)
|  +----------------------------------------------------------->   владелец (u -user)
+-------------------------------------------------------------->   тип данных --+-->  -  обычный файл
                                                                                |-->  d  католог
                                                                                |-->  b  блочный файл
                                                                                |-->  c  символьный файл
                                                                                |-->  l  символьная ссылка
                                                                                |-->  p  туннель и именованный туннель
                                                                                +-->  s  файл сокета
                              
-  нет прав
x  выполнение
w  запись и изменение
r  чтение
s  установлен SUID или SGID бит, первый отображается в поле для владельца, второй для группы;
t  установлен sticky-bit, а значит пользователи не могут удалить этот файл.

Выполнять программы от имени суперпользователя без знания его пароля  
SUID   --id пользователя, от которого она запущена заменяется на id владельца файла/папки
SGID   --id группы пользователя заменятеся на id группы файла/папки


chmod [опции] <категория_действие_флаг> <имя_файла>     --изменение прав
      _______ __________ ________ _____ 
         |         |         |      |
         |         |         |      +--------------->   r, w, x, s, t
         |         |         +-------------------+-->   +  добавить права
         |         |                             |-->   -  удалить права
         |         |                             +-->   =  полностью новые разрешения 
         |         |                                   
         |         +-----------------------------+-->   u  владелец файла
         |                                       |-->   g  группа файла
         |                                       |-->   o  другие пользователи
         |                                       +-->   a  все
         |
         +------------------------------------------>  -R  менять файлы и каталоги рекурсивно
         
Категория прав                User   Group   Other
Буквенное обозначение        r w x   r w x   r w x
Битовая маска                1 1 1   1 0 0   0 1 0
Маска в восьмеричном виде      7       4       2
         
         
Примеры:  chmod ugo+rwx file.txt
          chmod g+rx file.txt
          chmod +t file.txt
          chmod 742 file.txt
          chmod a+r file.txt  ~  chmod +r flie.txt
          
Владелец  (u)  --набор прав для владельца файла, пользователя, который его создал или 
                 сейчас установлен его владельцем. Обычно владелец имеет все права, чтение, запись и выполнение.
Группа    (g)  --любая группа пользователей, существующая в системе и привязанная к файлу. 
                 Но это может быть только одна группа и обычно это группа владельца,
                 хотя для файла можно назначить и другую группу.
Остальные (o)  --все пользователи, кроме владельца и пользователей, входящих в группу файла.         

          
chown <имя_пользователя>:[имя_группы] [опции] <путь/к/файлу>   --изменение владельца[группы] файла










         
